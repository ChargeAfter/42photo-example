<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    </head>
    <body>
        <script type="text/javascript">
                var caConfig = 'ec6489a2b9b8feecd74f0563be4e8de2b87eb9e0';

                !function(e,t,c,a,n){var r,o=t.getElementsByTagName(c)[0];
                t.getElementById(a)||(e.ChargeAfter={ak:n},(r=t.createElement(c)).id=a,
                r.src="https://cdn-qa.ca-dev.co/checkout/v1/checkout.min.js?t="+1*new Date,
                r.async=!0,o.parentNode.insertBefore(r,o))}
                (window,document,"script","chargeafter-checkout",caConfig);
                

                var caStartCheckout = function caStartCheckout() {
                    ChargeAfter.ui.present({
                        items: [
                          {
                            name: 'Awesome Product',
                            price: 1020.0,
                            sku: 'AWSMPRDCT',
                            quantity: 1,
                            leasable: true,
                            warranty: {
                              name: 'Awesome Product',
                              price: 5.0,
                              sku: 'AWSMPRDCT'
                            }
                          }
                        ],

                        // 4.
                        discounts: [
                          {
                            name: 'Birthday discount',
                            amount: 20
                          }
                        ],

                        // 5.
                        taxAmount: 100.0,
                        shippingAmount: 20.0,
                        totalAmount: 1125.0,
                        callback: function(token, error) {
                            var url = 'https://api-qa.ca-dev.co/v1/payment/charges'
                            var data = JSON.stringify({
                              'confirmationToken': token
                            });
                            const p = document.createElement('p');
                            document.body.appendChild(p);
                            if (token) {
                                $.ajax({
                                  type: "POST",
                                  url: url,
                                  data: data,
                                  crossDomain: true,
                                  dataType: "json",
                                  headers: {
                                    'Authorization': 'Bearer ' + '5b978ebce4749fcd84d8c94517c935a402316503'
                                  }
                                });
                            } else {
                              console.log('Error', error.message);
                            }

                        }
                    });
                }

                window.caStartCheckout = caStartCheckout;
        </script>

        <a href="#" class="ca-checkout-button" onclick="caStartCheckout();" />
    </body>
</html>